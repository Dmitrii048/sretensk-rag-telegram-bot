<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SDA Legal Assistant</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --bg-color: var(--tg-theme-bg-color, #ffffff);
            --text-color: var(--tg-theme-text-color, #222222);
            --hint-color: var(--tg-theme-hint-color, #999999);
            --btn-color: var(--tg-theme-button-color, #2481cc);
            --btn-text: var(--tg-theme-button-text-color, #ffffff);
            --card-bg: var(--tg-theme-secondary-bg-color, #f0f2f5);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0; padding: 0; display: flex; flex-direction: column; height: 100vh;
        }

        /* –®–∞–ø–∫–∞ */
        .header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 20px;
            background: var(--bg-color);
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .logo {
            width: 55px; height: 55px; object-fit: contain;
        }

        .title-container { text-align: center; flex: 1; margin: 0 10px; }
        .title-container h1 { margin: 0; font-size: 15px; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; }
        .title-container p { margin: 4px 0 0; font-size: 10px; color: var(--hint-color); }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç */
        .content {
            flex: 1; padding: 20px; overflow-y: auto;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .suggestions {
            display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; margin-bottom: 30px;
            width: 100%;
        }
        
        .chip {
            background-color: var(--card-bg);
            color: var(--text-color);
            padding: 10px 16px; border-radius: 20px; font-size: 13px; font-weight: 500;
            cursor: pointer; 
            border: 1px solid transparent;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }
        .chip:active { transform: scale(0.96); background-color: var(--btn-color); color: var(--btn-text); }

        /* –í–≤–æ–¥ */
        .input-area {
            padding: 20px; background-color: var(--bg-color);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
        }
        
        textarea {
            width: 100%; height: 60px;
            background-color: var(--card-bg); color: var(--text-color);
            border: 1px solid transparent; border-radius: 12px;
            padding: 12px; font-size: 16px; outline: none; resize: none;
            box-sizing: border-box; font-family: inherit; margin-bottom: 15px;
        }
        textarea:focus { border: 1px solid var(--btn-color); background-color: var(--bg-color); }

        .send-btn {
            width: 100%; padding: 14px;
            background-color: var(--btn-color); color: var(--btn-text);
            border: none; border-radius: 12px; font-size: 16px; font-weight: 600;
            cursor: pointer; text-transform: uppercase; letter-spacing: 1px;
            transition: opacity 0.2s;
        }
        .send-btn:active { opacity: 0.8; }
    </style>
</head>
<body>

    <div class="header">
        <!-- –í–ê–ñ–ù–û: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –¥–æ–ª–∂–Ω—ã –ª–µ–∂–∞—Ç—å –≤ —Ç–æ–π –∂–µ –ø–∞–ø–∫–µ docs —Å –∏–º–µ–Ω–∞–º–∏ academy.png –∏ themis.png -->
        <img src="academy.png" alt="–°–î–ê" class="logo" onerror="this.src='https://via.placeholder.com/50?text=SDA'">
        
        <div class="title-container">
            <h1>–ü—Ä–∞–≤–æ–≤–æ–π –ø–æ–º–æ—â–Ω–∏–∫</h1>
            <p>–°—Ä–µ—Ç–µ–Ω—Å–∫–∞—è –¥—É—Ö–æ–≤–Ω–∞—è –∞–∫–∞–¥–µ–º–∏—è</p>
        </div>

        <img src="themis.png" alt="–§–µ–º–∏–¥–∞" class="logo" onerror="this.src='https://via.placeholder.com/50?text=LAW'">
    </div>

    <div class="content">
        <p style="text-align: center; color: var(--hint-color); margin-bottom: 25px; font-size: 13px;">
            –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –æ–±—Ä–∞—â–µ–Ω–∏—è –∏–ª–∏ –Ω–∞–ø–∏—à–∏—Ç–µ –≤–æ–ø—Ä–æ—Å:
        </p>
        
        <div class="suggestions">
            <div class="chip" onclick="setQuestion('–ö–∞–∫ –æ—Ñ–æ—Ä–º–∏—Ç—å –∞–∫–∞–¥–µ–º–∏—á–µ—Å–∫–∏–π –æ—Ç–ø—É—Å–∫?')">üìÑ –ê–∫–∞–¥–µ–º. –æ—Ç–ø—É—Å–∫</div>
            <div class="chip" onclick="setQuestion('–ü—Ä–∞–≤–∏–ª–∞ –æ—Ç—á–∏—Å–ª–µ–Ω–∏—è –∑–∞ –Ω–µ—É—Å–ø–µ–≤–∞–µ–º–æ—Å—Ç—å')">‚ùå –û—Ç—á–∏—Å–ª–µ–Ω–∏–µ</div>
            <div class="chip" onclick="setQuestion('–†–∞–∑–º–µ—Ä —Å—Ç–∏–ø–µ–Ω–¥–∏–∏ –∏ —Å—Ä–æ–∫–∏ –≤—ã–ø–ª–∞—Ç')">üí∞ –°—Ç–∏–ø–µ–Ω–¥–∏—è</div>
            <div class="chip" onclick="setQuestion('–ü–æ—Ä—è–¥–æ–∫ –∑–∞—Å–µ–ª–µ–Ω–∏—è –≤ –æ–±—â–µ–∂–∏—Ç–∏–µ')">üè† –û–±—â–µ–∂–∏—Ç–∏–µ</div>
            <div class="chip" onclick="setQuestion('–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª—å–Ω—É—é –ø–æ–º–æ—â—å?')">sos –ú–∞—Ç–ø–æ–º–æ—â—å</div>
        </div>
    </div>

    <div class="input-area">
        <textarea id="question-input" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å..."></textarea>
        <button class="send-btn" onclick="sendData()">–ù–ê–ô–¢–ò –û–¢–í–ï–¢</button>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand(); 

        function setQuestion(text) {
            const input = document.getElementById('question-input');
            input.value = text;
            if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
            document.querySelector('.send-btn').focus();
        }

        function sendData() {
            const input = document.getElementById('question-input');
            const text = input.value.trim();

            if (!text) {
                tg.showAlert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–æ–ø—Ä–æ—Å.");
                return;
            }

            const btn = document.querySelector('.send-btn');
            btn.innerText = "–û–¢–ü–†–ê–í–õ–Ø–Æ...";
            btn.style.opacity = "0.7";
            
            if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');

            const data = JSON.stringify({ question: text });

            // === –ë–õ–û–ö –û–¢–õ–ê–î–ö–ò –ò –û–¢–ü–†–ê–í–ö–ò ===
            try {
                // –ü—ã—Ç–∞–µ–º—Å—è –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
                tg.sendData(data);
                
                // –ù–∞ —Å–ª—É—á–∞–π –µ—Å–ª–∏ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –æ–∫–Ω–æ –Ω–µ –∑–∞–∫—Ä—ã–ª–æ—Å—å —Å–∞–º–æ
                setTimeout(function() {
                    tg.close();
                }, 500);
                
            } catch (e) {
                // –ï—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ JS, –º—ã –µ—ë —É–≤–∏–¥–∏–º
                alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: " + e.message);
                btn.innerText = "–û–®–ò–ë–ö–ê";
            }
        }
    </script>
</body>
</html>
